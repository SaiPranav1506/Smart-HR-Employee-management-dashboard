spring.application.name=rollbasedlogin
server.port=${PORT:2222}

# Optional local-only overrides (SMTP username/password, etc.).
# Create src/main/resources/application-local.properties (see the .example file) and keep it uncommitted.
spring.config.import=optional:classpath:application-local.properties

spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:mysql://localhost:3306/rolebased_login}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:root22}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:root22}

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# Deployment: if the DB is unreachable/misconfigured, Hibernate can't infer a dialect from JDBC metadata.
# Setting it explicitly makes the real connection error easier to spot in logs.
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect

# --- Two-Factor Authentication (Email OTP) ---
# Set to false to disable 2FA (dev only).
app.2fa.enabled=true
app.2fa.code.ttl-seconds=300
app.2fa.max-attempts=5

# 2FA delivery mode:
# - mail: send OTP to user's email (requires SMTP settings below)
# - log:  dev-only, prints OTP in backend console (useful while setting up SMTP)
app.2fa.delivery=mail

# --- SMTP settings (required to send the verification code) ---
# Example for Gmail:
# spring.mail.host=smtp.gmail.com
# spring.mail.port=587
# spring.mail.username=your_email@gmail.com
# spring.mail.password=your_gmail_app_password
spring.mail.host=smtp.gmail.com
spring.mail.port=587
# FILL ONE OF THESE OPTIONS:
#  - Option A (recommended): set env vars SPRING_MAIL_USERNAME and SPRING_MAIL_PASSWORD
#  - Option B: put them in application-local.properties (not committed)
spring.mail.username=${SPRING_MAIL_USERNAME:}
spring.mail.password=${SPRING_MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Optional: From address shown in the email
app.mail.from=${APP_MAIL_FROM:${SPRING_MAIL_USERNAME:}}
